<h1 id="animator_access_generator_advanced_topics">Animator Access Generator Advanced Topics</h1>

<p>See the basic <a href="../README-HTML.html">README.md</a> for an introduction to Animator Access Generator</p>

<h2 id="settings">Settings</h2>

<p>Configuration is done via the Settings window. </p>

<p><img src="./AnimatorAccess_Settings.png" alt="Setting Editor Window" title="" /></p>

<ol>
<li><strong>Auto Refresh AssetDatabase:</strong> Automatically call an AssetDabase.Refresh () after updating an existing AnimatorAccess class. <br />
Note that the MonoDevelop project is reloaded too which can be annoying.</li>
<li><strong>Auto Refresh Interval:</strong> Automatically check for updates after this interval (in seconds) has elapsed. Set this to 0 to suppress automatic checking.</li>
<li><strong>Ignore Existing Code:</strong> Unchecked (default) means that the current version of the class is analysed first. Existing members that are not valid any longer are created once but with the obsolete attribute set. <br />
So you can replace references to these outdated members in your code. Performing another generation will then remove all obsolete members.  Check this if existing members should be removed immediately. <br />
Note that this option overwrites &#8216;Keep Obsolete Members&#8217;</li>
<li><strong>Keep Obsolete Members:</strong> Obsolete fields and methods are not removed. This might lead to a lot of unnecessary code. <br />
Note that this option is not considered if &#8216;Ignore Existing Code&#8217; is set.</li>
<li><strong>Force Layer Prefix:</strong> Check this if you want the layer name be prepended even for Animator states of layer 0.</li>
<li><strong>Animator State Prefix:</strong> Optional prefix for all methods that check animation state. Prefix is set betwen &#8216;Is&#8217; and the state name. <br />
Example: <br />
&#8216;State&#8217; will generate the method &#8216;bool IsStateIdle ()&#8217; for state Idle.</li>
<li><strong>Animator State Hash Prefix:</strong> Optional prefix for all int fields representing an animator state. <br />
Example: <br />
&#8216;stateHash&#8217; will generate the field &#8216;int stateHashIdle&#8217; for state &#8216;Idle&#8217;.</li>
<li><strong>Parameter Prefix:</strong> Optional prefix for parameter access methods. Prefix is set betwen &#8216;Get&#8217;/&#8217;Set&#8217; and the parameter name. <br />
Example: <br />
&#8216;Param&#8217; will generate the method &#8216;float SetParamSpeed ()&#8217; for parameter &#8216;Speed&#8217;.</li>
<li><strong>Parameter Hash Prefix:</strong> Optional prefix for int fields representing a parameter. <br />
Example: <br />
&#8216;paramHash&#8217; will generate the field &#8216;float paramHashSpeed&#8217; for parameter &#8216;Speed&#8217;.</li>
<li><strong>Generate State Dictionary:</strong> Create an Animator state dictionary that can be queried by StateIdToName (int id).</li>
<li><strong>Debug Mode:</strong> Extended logging to console view.</li>
</ol>

<h2 id="persistent_storage_location">Persistent Storage Location</h2>

<p>All settings are saved in directory at:
<pre><code>Application.persistentDataPath + "/AnimatorAccessConfig.txt"</pre></code>
See the <a href="http://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html">Unity documentation</a>
or use Debug.Log to find the OS specific place.</p>

<p>AnimatorAccessConfig.txt is a simple text file. The modified PlayerPrefs class is based on PreviewLabs.PlayerPrefs 
(s. <a href="http://www.previewlabs.com/writing-playerprefs-fast/">their web site</a> for original source and description).</p>

<p>The <em>Undo Files</em> are stored using Unity&#8217;s <a href="http://docs.unity3d.com/ScriptReference/Application-temporaryCachePath.html">Application.temporaryCachePath</a>.</p>

<h2 id="smartformat_template">SmartFormat Template</h2>

<p><a href="https://github.com/scottrippey/SmartFormat.NET">SmartFormat</a> is currently used as template enginge to generate the 
code. There are OS dependent template files due to different line endings on UNIX and Windows. The templates can be 
found under:
<em>InstallationDir</em>/Editor/Templates/DefaultTemplate-UNIX.txt
<em>InstallationDir</em>/Editor/Templates/DefaultTemplate-Win.txt</p>

<h2 id="moving_animator_access_menu">Moving Animator Access Menu</h2>

<p>If you want to move the menu for Animator Access from top menu to a different location:</p>

<p>Edit the constant <strong>RootMenu</strong> in file <strong>Editor/MenuLocation.cs</strong>. Note that you have to repeat this step after 
every update of Animator Access.</p>

<h2 id="file_specific_configuration">File Specific Configuration</h2>

<p>This is currently not supported via GUI but can be done easily in code. The responsible Config factory class is 
designed as partial class so that it can be extended in a separate file. In order to register your own 
<strong>SpecialConfig</strong> create a new file ConfigFactoryExt.cs and implement <strong>ConfigFactory</strong>&#8217;s static constructor. </p>

<p><pre><code>
namespace Scio.AnimatorAccessGenerator
{
    public partial class ConfigFactory {
        static ConfigFactory () {
            ConfigFactory myFactory = new ConfigFactory ();
            instance = myFactory;
            myFactory.defaultConfig = new Config ();
            Config specialConfig = new SpecialConfig ();
            specialConfig.AnimatorStatePrefix = "MyAnim";
            myFactory.configs ["ExamplePlayerAnimatorAccess"] = specialConfig;
        }
    }
    // Provide an implementation of your <strong>SpecialConfig</strong> class. Bear in mind that the default class makes all
    // changes persistent.
    public class SpecialConfig : Config {
        public override string AnimatorStatePrefix {
            get {
                return "MyAnim";
            }
            // provide an empty setter to avoid that "MyAnim" is written back to the default config.
            set {}
        }
    }
}
</pre></code></p>
